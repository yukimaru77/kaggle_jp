# 要約 
このKaggleコンペティション「LLM 20 Questions」のディスカッションは、現在のランキングシステムが公平性に欠け、宝くじのような状態になっているという懸念を表明しています。

**主な懸念点:**

* **ランキングの不安定性:** 同じモデルが異なるランダムシードで実行された場合、リーダーボード上の順位が大きく異なることが観察されています。
* **キーワードリストへの依存:** 一部のボットは公開されたキーワードリストに依存しており、プライベートリストが公開されたときに性能が低下する可能性があります。
* **勝利ポイントの偏り:** 勝利には多くのポイントが与えられ、敗北ではポイントがそれほど急速に減少しないため、幸運な勝利によってリーダーボードで急速なジャンプが発生する可能性があります。
* **エラーボットの影響:** エラーボットが他のすべてのボットに勝利を獲得してしまうため、ランキングに歪みが生じます。
* **成熟したボットのゲームプレイ頻度が遅い:**  成熟したボットはゲームプレイ頻度が低いため、リーダーボードの順位が安定しません。

**提案:**

* **ランキングシステムの改善:** TrueSkillシステムの代わりに、n_winsランキングを使用するなど、より安定したランキングシステムを導入する。
* **エラーボットへのペナルティ:** エラーボットにペナルティを課し、他のプレイヤーに報酬を与える。
* **ゲームプレイ頻度の調整:**  成熟したボットのゲームプレイ頻度を調整し、リーダーボードの安定性を向上させる。
* **回答者の組み合わせ:** 1つの回答者ではなく、複数の回答者を使用することで、回答の精度を向上させる。

**結論:**

ディスカッションでは、現在のランキングシステムがコンペティションの公平性に影響を与えていることが指摘されています。主催者は、これらの懸念に対処し、より公平で安定したランキングシステムを導入する必要があるとされています。


---
# このコンペティションは宝くじなのか？

**gguillard** *2024年7月20日 土曜日 21:47:38 日本標準時* (11票)

Kaggleチームに失礼な言い方かもしれませんが、最初の提出物のエピソードを見て、ディスカッションで多くの懸念を読んだ後、私はかなり困惑しました。そのため、このコンペティションにさらに時間を投資する価値があるかどうかを判断するために、ランキングシステムの公平性を自分自身に納得させる必要がありました。

そこで、私は少し遊べるように小さなノートブックを作成しました:
[https://www.kaggle.com/code/gguillard/llm-20-questions-trueskill-simulator](https://www.kaggle.com/code/gguillard/llm-20-questions-trueskill-simulator)

私は本当に自分の直感を覆すことを期待していましたが、そうではありませんでした。むしろ、私の調査に深刻な欠陥がないと仮定すると、私の発見は、ランキングがそれほど似ていないスキルの対戦相手を区別するのに十分なほど収束しないということです:

うまくいけば、私はいくつかのパラメータを間違えていて、主催者が指摘してくれるでしょう。そうでなければ、ランキングシステムを修正するのに遅すぎるわけではありません。

この件に関する多くの議論の中で、私は[最近[@c-number](https://www.kaggle.com/c-number)によって示された素晴らしい例](https://www.kaggle.com/competitions/llm-20-questions/discussion/520928)は、同じモデルが同じ日に投稿されたにもかかわらず、現在のリーダーボードで1位、6位、そして60位 (!) にランク付けされていることは、現在の評価システムを使用する意味がないことを十分に証明しています。

現状では、このコンペティションは実際には（偏っているものの、それでも）宝くじです。宝くじに反対するわけではありませんが、宝くじであることを知っておくのは良いことです。なぜなら、あまり期待しない方が良いからです。

主催者が最高の提出物を報いるという意味で、このコンペティションを有意義なものにしたいのであれば、ランキングオプションを再考するよう強く求めます。このコンペティションが採点システムのために嫌われるのは残念です。なぜなら、それは本当に楽しいコンペティションだからです。

[@bovard](https://www.kaggle.com/bovard) [@addisonhoward](https://www.kaggle.com/addisonhoward)

PS:  もしかしたら、私のノートブックの最新の改善によって状況は変わったのかもしれません（確認していません）。しかし、最初のテストでは、TrueSkillシステムは、このようなコンペティションのパラメータの組み合わせに関係なく、あまり安定しているようには見えませんでした。私の意見では、単にn_winsランキング（質問者 + 回答者）で、提出物ごとに固定されたゲーム数を使用するだけです。

編集:

以下は、ランダムシードが異なる4つの実験のリーダーボードです（ノートブックの最後のバージョンの下部を参照してください）。

```
リーダーボード 1
ランク    id  スキル   mu
1        1   0.98    977
2        4   0.77    985
3        0   0.98    962
4        2   0.96    926
5        20  0.43    978
リーダーボード 2
ランク    id  スキル   mu
1        0   0.98    1021
2        2   0.96    925
3        9   0.58    974
4        4   0.77    854
5        8   0.59    941
リーダーボード 3
ランク    id  スキル   mu
1        1   0.98    1019
2        0   0.98    1038
3        2   0.96    1014
4        4   0.77    913
5        5   0.73    988
リーダーボード 4
ランク    id  スキル   mu
1        4   0.77    969
2        8   0.59    978
3        1   0.98    912
4        0   0.98    948
5        3   0.82    986
```

---
# 他のユーザーからのコメント

> ## Andrew Tratz
> 
> これは、現在の状態でのこのコンペティションのいくつかの現実を反映していると思います。
> 
> 最高ランクのボットでも、ゲームの大部分を負けています。
> 高ランクのボットの中には、公開されたキーワードリストに依存しているものがあり、プライベートリストが公開されたときに堅牢ではない可能性があります。
> 2つのボットをペアにすることで、このランダム性が複合されます。
> 勝利には多くのポイントが与えられ、敗北ではポイントがそれほど急速に減少しないようです。
> ボットがエラーを起こすと、他のすべてのボットが勝利を獲得します。
> 「成熟した」ボットのゲームプレイ頻度が比較的遅い。
> 
> これは、いくつかの幸運な勝利によってLBで急速なジャンプが発生しますが、減衰は非常に遅いことを意味します。キーワードリストへの過度の依存は、ボットがしばらくの間トップに留まることを可能にするかもしれませんが、プライベートキーワードが公開されたときにリスクにさらされることになります。
> 
> 主催者は、#5をエラーボットにペナルティを課し、他のプレイヤーに報酬を与えないように変更する必要があると思います。なぜなら、これは単に歪みを加えるだけだからです。他のシミュレーションコンペティションでは理にかなっていますが、このコンペティションではそうではないかもしれません。#4についても、いくつかの調整が役立つかもしれません。
> 
> プライベートLBでは、いくつかの健全な変動が見られると思いますが、いくつかのユーザーが明らかに優れたボットを開発しない限り、この変動もランダムになる可能性があります。
> 
> 
> 
> > ## OminousDude
> > 
> > プライベートでの変動は、かなり大きくなると思います。トップ25にいる全員が、公開されたLBキーワードリストを使用していることはほぼ確信しています。
> > 
> > 
> > 
> > > ## VolodymyrBilyachat
> > > 
> > > 私のエージェントはキーワードを知りませんが、カテゴリしかありません。しかし、残念ながら、これは非常に運任せです。
> > > 
> > > 
> > > 
> > ## gguillardトピック作成者
> > 
> > 公開されたキーワードリストに依存しているボットは、開発者の責任であり、主催者の責任ではありません。ただし、LLMコンペティションなので、非LLMまたは部分LLMボットが失格になるかどうかは気になります。
> > 
> > ポイント#4は少し間違っています。損失と引き分けを混同しています。勝利と敗北の関係はほぼ対称的ですが、プレイヤーの異なるmuとsigmaによって異なります。いずれにせよ、これはTrueSkillの設定によるものであり（ノートブックを参照）、主催者によって意図的に選択されたものだと思います。
> > 
> > 
> > 
> > > ## loh-maa
> > > 
> > > 失格は、気まぐれに適用されるべきではありません。そうするためには、確固たる根拠が必要です。テクニックに関する特定のルールがないため、おそらくすべてのテクニックが許可されているはずです（もちろん、一般的な不正行為を除く）。そして、ルールを変更するには、明らかに遅すぎるでしょう。
> > > 
> > > 
> > > 
---
> ## OminousDude
> 
> 私は完全に同意し、これが大きな問題であると考えており、コンペティションの主催者がこれを解決する方法を見つけることを心から願っています。
> 
> このスコア偏差を最小限に抑える1つの方法は、過去約50ラウンドで1回も勝利していないエージェントを削除することです。これにより、リーダーボードの上位のエージェントを、低いボットと高いボットが時々一緒に配置されて、スコア約650からゼロまでの間の「愚かさの淵」を克服するのを助けるため、低いボットが引き下げられるのを防ぐことができます。
> 
> もう1つの方法は、ゲームを1回ではなく3回プレイすることです。これにより、各エージェントがお互いにプレイすることになります。たとえば、ラウンド1がエージェント1とエージェント2からなるチームaによって勝利した場合、次のラウンドではエージェント1はエージェント3とエージェント4と対戦します。このようにして、各エージェントはお互いのモデルと対戦します。2番目のオプションは、1人の質問者エージェントが「悪い」回答者を得る問題を解決します。誰もラウンドに勝利しない場合、デフォルトのポイントが与えられます。2ラウンドが勝利した場合、両方の勝利チームに含まれるエージェントはブーストを受け、1ラウンドしか勝利していないそれらのラウンドの他のエージェントは、より小さい（それでもかなりの）報酬を受けます。
> 
> 最後に、3番目の解決策は、1人のエージェントが常に負ける/勝利しない場合、チームのもう1人のエージェントはわずかにブーストを受け（+10程度）、負けたボットは少し減点されます（-10程度）。これにより、勝利するボットと負けるボットがより早く分離され、実際にプレイして勝利できるボットは、よりレベルの高いボットと対戦することになります。
> 
> コンペティションの主催者は、これらのオプションの少なくとも1つ（できれば2番目と3番目のオプション）を検討することを願っています。私が上記で説明したような小さな変更は、採点の「宝くじ」側面に大きな変化をもたらすでしょう。
> 
> 
> 
> > ## gguillardトピック作成者
> > 
> > 良い点は、これらのオプションはすべて、シミュレーターノートブックで簡単にテストできるようになったことです。そのため、事実に基づいて、どのオプションが最適かを判断できます。
> > 
> > 
> > 
> > > ## OminousDude
> > > 
> > > ああ、気づきました！可能な戦略をいくつかあなたのノートブックで実行して、最適なものを探すことをお勧めします。
> > > 
> > > 
> > > 
> > > ## gguillardトピック作成者
> > > 
> > > 私に関しては、しばらくの間、2回目の提出に集中しようと思います。:D
> > > 
> > > しかし、主催者が評価の変更にオープンであることを認めた場合、必要であれば喜んで協力します。
> > > 
> > > 
> > > 
---
> ## loh-maa
> 
> 特に新しいプレイヤーにとっては、多くの混乱があり、疑問に思うのも当然です。お気づきかもしれませんが、スコアが約750に達したエージェントは、突然頻繁にプレイしなくなり、1日1〜2ゲームしかプレイしなくなります。これは明らかにLBに影響を与え、最終段階では正常に戻されることはほぼ確実です。この変更が導入された理由はよくわかりませんが、実際の性能を隠すためかもしれません。また、特定のソリューションが過度に普及して、全体を台無しにするのを防ぐのに役立つかもしれません。いずれにせよ、心配する必要はありません。最高のアイデアで参加してください！
> 
> 
> 
---
> ## VolodymyrBilyachat
> 
> 回答者の組み合わせは、このコンペティションを改善しませんか？1つの回答は、完全に間違った方向に進んでしまうように感じます :( 100%の問題を解決するわけではありませんが、それでも大幅に改善される可能性があります。
> 
> 
> 
---
