## Gemma Keras 1.1_7b instruct_en ã‚’ Google Cloud ãªã—ã§ä½¿ã†æ–¹æ³•ã«ã¤ã„ã¦ã€1.1_2b_instruct_en ã®ãƒ¡ãƒ¢ãƒªä¸è¶³å•é¡Œ

**MarÃ­lia Prata** *2024å¹´5æœˆ10æ—¥ é‡‘æ›œæ—¥ 10:43:46 GMT+0900 (æ—¥æœ¬æ¨™æº–æ™‚)* (17ç¥¨)

Gemma Keras 1.1 -7b- instruct-en ã§ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å•é¡Œã«ç›´é¢ã—ã¦ã„ã¾ã™ã€‚  ã€ŒãƒŽãƒ¼ãƒˆãƒ–ãƒƒã‚¯ãŒä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã‚’è¶…ãˆã‚‹ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ãƒŽãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã¯å†èµ·å‹•ã•ã‚Œã¾ã™ã€‚ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚  Google Cloud ã«ç§»å‹•ã™ã‚‹ã‹ã€ç„¡è¦–ã—ã¦ãã ã•ã„ã€‚

ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚

```python
os.environ["XLA_PYTHON_CLIENT_PREALLOCATE"]="false"
os.environ["XLA_PYTHON_CLIENT_MEM_FRACTION"]=".XX"
os.environ["XLA_PYTHON_CLIENT_ALLOCATOR"]="platform"
```

ã•ã‚‰ã«ã€è¡Œæ•°ã‚’æ¸›ã‚‰ã—ã¾ã—ãŸã€‚

GemmaCausalLM ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã€ŒãƒŽãƒ¼ãƒˆãƒ–ãƒƒã‚¯ãŒä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã‚’è¶…ãˆã‚‹ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚

# Google Cloud ãªã—ã§ Gemma Keras 1.1- 7b instruct -en ã‚’ä½¿ã†æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

è¨˜éŒ²ã¨ã—ã¦ã€ã“ã® LMSYS ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã§å›ºå®šã•ã‚ŒãŸä»–ã® 7b ãƒ¢ãƒ‡ãƒ«ï¼ˆ70å„„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ã§ã¯ã€ã“ã®å•é¡Œã¯ç™ºç”Ÿã—ã¦ã„ã¾ã›ã‚“ã€‚

å¹¸ã„ãªã“ã¨ã«ã€Awsaf ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã¦ã€ç§ã®æœ€åˆã®ï¼ˆGemma 1.1-7b-instruct-enã€2024å¹´5æœˆ10æ—¥ 34åˆ†å‰ï¼‰ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚
[Gemma 1.1 7B Int8 Load](https://www.kaggle.com/code/awsaf49/gemma-1-1-7b-int8-load) Awsaf ã«ã‚ˆã£ã¦ã€‚

äº‹å‰ã«æ„Ÿè¬ã—ã¾ã™ã€‚
MarÃ­lia. 

---
# ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ

> ## Adnan Alaref
> 
> [@mpwolke](https://www.kaggle.com/mpwolke) ã•ã‚“ã€ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’æ¸›ã‚‰ã—ã¦ã€ã‚«ãƒ¼ãƒãƒ«ã‚’å†èµ·å‹•ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
> 
> 
> 
> > ## MarÃ­lia Prataãƒˆãƒ”ãƒƒã‚¯ä½œæˆè€…
> > 
> > ç§ã® `batch_size = 1` ã§ã™ã€‚ã‚‚ã£ã¨å°ã•ãã§ãã¾ã™ã‹ï¼Ÿã‚¼ãƒ­ã‹è² ã®æ•°ã§ã™ã‹ï¼ŸðŸ˜†
> > 
> > 
> > 
---
> ## Kaizhao Liang
> 
> RAM ãŒä¸è¶³ã™ã‚‹ãŸã‚ã€1B ã‚’è¶…ãˆã‚‹äº‹å‰å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã¨æ€ã„ã¾ã™ã€‚
> 
> 
> 
> > ## MarÃ­lia Prataãƒˆãƒ”ãƒƒã‚¯ä½œæˆè€…
> > 
> > ãƒ¢ãƒ‡ãƒ«ãŒãƒ¡ãƒ¢ãƒªã®ãŸã‚ã«ã©ã®ã‚ˆã†ã«æå‡ºæ™‚ã«å‹•ä½œã™ã‚‹ã®ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€æå‡ºã›ãšã«å•é¡Œã«ç›´é¢ã—ã¦ã„ã¾ã—ãŸã€‚ã‚³ãƒ¼ãƒ‰ã®æœ€åˆã§ã€‚
> > 
> > å¹¸ã„ãªã“ã¨ã«ã€Awsaf ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã¾ã—ãŸï¼š[Gemma 1.1 7B Int8 Load](https://www.kaggle.com/code/awsaf49/gemma-1-1-7b-int8-load) ãã—ã¦ç§ã®æœ€åˆã®ï¼ˆGemma 1.1-7b-instruct-enã€34åˆ†å‰ï¼‰ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚
> > 
> > Kaizhao ã•ã‚“ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
> > 
> > 
> > 
---
> ## Matin Mahmoudi âœ¨
> 
> ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’æ¸›ã‚‰ã—ã€æ··åˆç²¾åº¦ï¼ˆfloat16ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€ãƒ¡ãƒ¢ãƒªãƒ•ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸‹ã’ã¦ Gemma Keras 1.1-7b ã‚’å‡¦ç†ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãã‚Œã§ã‚‚ã†ã¾ãã„ã‹ãªã„å ´åˆã¯ã€ã‚ˆã‚Šå°ã•ãªãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€å‹¾é…ç´¯ç©ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ [@mpwolke](https://www.kaggle.com/mpwolke)ã€‚
> 
> 
> 
> > ## MarÃ­lia Prataãƒˆãƒ”ãƒƒã‚¯ä½œæˆè€…
> > 
> > Matin ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚
> > 
> > ãƒãƒƒãƒã‚µã‚¤ã‚ºã¯ 1 ã§ã™ã€‚
> > 
> > 7b ã§ã¯ãªãã€ã‚³ãƒ¼ãƒ‰ã®æœ€å¾Œã¾ã§åˆ°é”ã™ã‚‹ãŸã‚ã« Gemma Keras 1.1_2b_instruct_en ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
> > 
> > ãƒ›ã‚¹ãƒˆã¯ 7b ã‚’å›ºå®šã—ã¦ã„ã¾ã™ãŒã€‚
> > 
> > ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
> > 
> > 
> > 
---

